<nz-table #nztable nzSize="middle" [nzData]="showedItems" [nzLoading]="table.isLoading">
  <thead>
    <tr>
      <th nzWidth="20%" class="center">From</th>
      <th nzWidth="20%" class="center">To</th>
      <th nzWidth="10%" class="center">Code</th>
      <th nzWidth="10%" class="center">Id</th>
      <th nzWidth="20%" class="center">
        Actions
        <i class="anticon anticon-plus-circle-o header-custom-action" (click)="onAddRow()"></i>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let item of nztable.data">
      <td>
        <ng-container *ngIf="!table.rows[item.id].isEditting">
          {{item.from | date : 'short'}}
        </ng-container>
        <ng-container *ngIf="table.rows[item.id].isEditting">          
          <nz-date-picker [(ngModel)]="table.rows[item.id].data.from" nzShowTime [disabled]="table.rows[item.id].isProcessing" nzSize="small"></nz-date-picker>
        </ng-container>
      </td>
      <td>
        <ng-container *ngIf="!table.rows[item.id].isEditting">
          {{item.to | date : 'short'}}
        </ng-container>
        <ng-container *ngIf="table.rows[item.id].isEditting">
          <nz-date-picker [(ngModel)]="table.rows[item.id].data.to" nzShowTime [disabled]="table.rows[item.id].isProcessing" nzSize="small"></nz-date-picker>
        </ng-container>
      </td>
      <td>
        <ng-container *ngIf="!table.rows[item.id].isEditting">
          {{item.code}}
        </ng-container>
        <ng-container *ngIf="table.rows[item.id].isEditting">
          <input type="text" nz-input [(ngModel)]="table.rows[item.id].data.code" [disabled]="table.rows[item.id].isProcessing" nzSize="small" />
        </ng-container>
      </td>
      <td>
        <nz-tag [nzColor]="'blue'" *ngIf="item.id < 0" class="ant-single-tag">New</nz-tag>
        <span *ngIf="item.id >= 0">{{item.id}}</span>
      </td>
      <td>
        <div class="editable-row-operations">
          <ng-container *ngIf="!table.rows[item.id].isEditting">
            <button nz-button nzType="default"
                    (click)="onStartEdit(item.id)"
                    nzSize="small">
                Edit
            </button>
          </ng-container>
          <ng-container *ngIf="table.rows[item.id].isEditting">            
            <button nz-button nzType="primary"
                    (click)="onSaveEdit(item.id)"
                    [nzLoading]="table.rows[item.id].isProcessing"
                    nzSize="small">
                Save
            </button>
            <button nz-button nzType="danger"
                    (click)="onCancelEdit(item.id)"
                    [disabled]="table.rows[item.id].isProcessing"        
                    nzSize="small">
                Cancel
            </button>
          </ng-container>
        </div>
      </td>
    </tr>
  </tbody>
</nz-table>